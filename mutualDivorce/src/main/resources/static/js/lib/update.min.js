// Get all checkboxes with the class "approvalCheckbox"
const checkboxes = document.querySelectorAll('.approvalCheckbox');

// Attach a click event listener to each checkbox
checkboxes.forEach(approvalCheckbox => {
    approvalCheckbox.addEventListener('click', function() {
        // Check if the checkbox is checked
        if (approvalCheckbox.checked) {
            // Extract the index from the data-index attribute
            const index = prompt("Enter index of divorce you want to approve");//approvalCheckbox.getAttribute('data-index');
            console.log(`index: ${index}`);

            // Make an API request with the index
            callAPI(index);
        }
    });
});

// Function to make the API request
function callAPI(index) {
    // Replace 'your-api-endpoint' with the actual URL of your API
    // Include the index as a parameter in the URL
    const apiEndpoint = `http://localhost:8081/divorces/updateApproved?id=${index}`;

    fetch(apiEndpoint, {
        method: 'PUT', // You can use POST or another HTTP method as needed
        headers: {
            'Content-Type': 'application/json', // Set the appropriate content type
        },
        body: JSON.stringify({ approved: true }), // Send data to the API if needed
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json(); // Assuming your API returns JSON data
        })
        .then(data => {
            // Handle the API response data here
            console.log(data);
        })
        .catch(error => {
            // Handle any errors that occurred during the fetch
            console.error('There was a problem with the fetch operation:', error);
        });
}
